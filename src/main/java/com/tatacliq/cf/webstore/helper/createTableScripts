-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE public.address
(
    address_id bigint NOT NULL,
    address character varying(255),
    city character varying(255),
    state character varying(255),
    country character varying(255),
    type character varying(255),
    zip bigint,
    phone_num bigint,
    PRIMARY KEY (address_id)
);

CREATE TABLE public.catalog
(
    name character varying(255),
    description character varying(255),
    catalog_id bigint NOT NULL,
    PRIMARY KEY (catalog_id)
);

CREATE TABLE public.catalog_category
(
    catalog_id bigint NOT NULL,
    category_id bigint NOT NULL,
    PRIMARY KEY (catalog_id, category_id)
);

CREATE TABLE public.category
(
    category_id bigint NOT NULL,
    name character varying(255),
    description character varying(255),
    sub_id bigint,
    PRIMARY KEY (category_id)
);

CREATE TABLE public.category_product
(
    category_id bigint NOT NULL,
    product_id bigint NOT NULL,
    PRIMARY KEY (category_id, product_id)
);

CREATE TABLE public.credit_card
(
    card_id bigint NOT NULL,
    card_number character varying(255),
    card_type character varying(255),
    exp_date date,
    PRIMARY KEY (card_id)
);

CREATE TABLE public.image
(
    image_id bigint NOT NULL,
    name character varying(255),
    path character varying(255),
    item_id bigint,
    product_id bigint,
    category_id bigint,
    catalog_id bigint,
    PRIMARY KEY (image_id)
);

CREATE TABLE public.item
(
    item_id bigint NOT NULL,
    item_name character varying(255),
    description character varying(255),
    price double precision,
    available boolean,
    product_id bigint,
    PRIMARY KEY (item_id)
);

CREATE TABLE public.order_item
(
    order_id bigint NOT NULL,
    item_id bigint,
    o_i_d bigint NOT NULL,
    PRIMARY KEY (order_id, o_i_d)
);

CREATE TABLE public.order_product
(
    order_id bigint NOT NULL,
    quantity bigint,
    product_id bigint,
    o_p_id integer,
    PRIMARY KEY (order_id)
);

CREATE TABLE public.product
(
    product_id bigint NOT NULL,
    name character varying(255),
    description character varying(255),
    cost double precision,
    units bigint,
    PRIMARY KEY (product_id)
);

CREATE TABLE public.torder
(
    order_id bigint NOT NULL,
    order_status character varying(255),
    date date,
    user_id bigint,
    credit_card_id bigint,
    address_id bigint,
    PRIMARY KEY (order_id)
);

CREATE TABLE public.user_account
(
    user_id bigint NOT NULL,
    fname character varying(255),
    lname character varying(255),
    dob date,
    email_id character varying(255),
    user_name character varying(255),
    password character varying(255),
    address_id bigint,
    PRIMARY KEY (user_id)
);

ALTER TABLE public.catalog_category
    ADD FOREIGN KEY (catalog_id)
    REFERENCES public.catalog (catalog_id)
    NOT VALID;


ALTER TABLE public.catalog_category
    ADD FOREIGN KEY (category_id)
    REFERENCES public.category (category_id)
    NOT VALID;


ALTER TABLE public.category_product
    ADD FOREIGN KEY (category_id)
    REFERENCES public.category (category_id)
    NOT VALID;


ALTER TABLE public.category_product
    ADD FOREIGN KEY (product_id)
    REFERENCES public.product (product_id)
    NOT VALID;


ALTER TABLE public.image
    ADD FOREIGN KEY (catalog_id)
    REFERENCES public.catalog (catalog_id)
    NOT VALID;


ALTER TABLE public.image
    ADD FOREIGN KEY (category_id)
    REFERENCES public.category (category_id)
    NOT VALID;


ALTER TABLE public.image
    ADD FOREIGN KEY (item_id)
    REFERENCES public.item (item_id)
    NOT VALID;


ALTER TABLE public.image
    ADD FOREIGN KEY (product_id)
    REFERENCES public.product (product_id)
    NOT VALID;


ALTER TABLE public.order_item
    ADD FOREIGN KEY (item_id)
    REFERENCES public.item (item_id)
    NOT VALID;


ALTER TABLE public.order_item
    ADD FOREIGN KEY (order_id)
    REFERENCES public.torder (order_id)
    NOT VALID;


ALTER TABLE public.order_product
    ADD FOREIGN KEY (order_id)
    REFERENCES public.torder (order_id)
    NOT VALID;


ALTER TABLE public.order_product
    ADD FOREIGN KEY (product_id)
    REFERENCES public.product (product_id)
    NOT VALID;


ALTER TABLE public.torder
    ADD FOREIGN KEY (address_id)
    REFERENCES public.address (address_id)
    NOT VALID;


ALTER TABLE public.torder
    ADD FOREIGN KEY (credit_card_id)
    REFERENCES public.credit_card (card_id)
    NOT VALID;


ALTER TABLE public.torder
    ADD FOREIGN KEY (user_id)
    REFERENCES public.user_account (user_id)
    NOT VALID;


ALTER TABLE public.user_account
    ADD FOREIGN KEY (address_id)
    REFERENCES public.address (address_id)
    NOT VALID;

END;